Logic:

While WAITING: Show only their position in queue (#3) - this is what matters to them
After CONFIRMED: Show booking number (#59) - this is what they show at counter
Why: Users care about "how many people ahead of me?" not "what's my booking ID?"


üìù Complete Code Changes:
File 1: client/src/pages/QueueStatus.tsx
tsximport { useParams, Link } from "wouter";
import { useQueueStatus } from "@/hooks/use-queue";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Users, Calendar, Clock } from "lucide-react";
import { format } from "date-fns";

export default function QueueStatus() {
  const { id } = useParams();
  const { data: entry, isLoading } = useQueueStatus(id || "");

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center">
        <div className="text-xl">Loading...</div>
      </div>
    );
  }

  if (!entry) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center">
        <Card className="max-w-md mx-4">
          <CardContent className="pt-6">
            <p className="text-center text-gray-600">Queue entry not found</p>
          </CardContent>
        </Card>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 flex items-center justify-center p-4">
      <Card className="w-full max-w-md bg-white/90 backdrop-blur-sm shadow-2xl">
        <CardContent className="pt-8 pb-6 px-6">
          {/* Success Icon */}
          <div className="flex justify-center mb-4">
            <div className="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center">
              <svg className="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M5 13l4 4L19 7" />
              </svg>
            </div>
          </div>

          {/* Title */}
          <h1 className="text-4xl font-bold text-center text-gray-800 mb-2">Queued!</h1>
          <p className="text-center text-sm text-gray-600 mb-6">
            CAFE TIMINGS: 12:30 PM TO 11:00 PM (EVERYDAY)
          </p>

          {/* Position Display - MAIN FOCUS */}
          <div className="text-center mb-6">
            <p className="text-gray-600 text-sm mb-2">Your position in line</p>
            <div className="text-8xl font-bold text-gray-800 mb-2">
              #{entry.position || entry.activeQueuePosition || 0}
            </div>
            <p className="text-lg font-semibold text-gray-700">
              YOU ARE #{entry.position || entry.activeQueuePosition || 0} IN LINE
            </p>
          </div>

          {/* Booking Reference - Small */}
          <p className="text-center text-xs text-gray-500 mb-6">
            Booking Reference: #{entry.dailySerialNumber}
          </p>

          {/* Info Cards */}
          <div className="grid grid-cols-2 gap-4 mb-6">
            <div className="bg-amber-50 rounded-lg p-4 border border-amber-200">
              <p className="text-xs text-gray-600 mb-1 flex items-center gap-1">
                <Users className="w-3 h-3" /> BOOKING FOR
              </p>
              <p className="text-3xl font-bold text-gray-800">{entry.numberOfPeople}</p>
            </div>
            <div className="bg-amber-50 rounded-lg p-4 border border-amber-200">
              <p className="text-xs text-gray-600 mb-1 flex items-center gap-1">
                <Calendar className="w-3 h-3" /> DATE & TIME
              </p>
              <p className="text-sm font-semibold text-gray-800">
                {entry.bookingDateTime ? format(new Date(entry.bookingDateTime), "dd MMM, hh:mm a") : "N/A"}
              </p>
            </div>
          </div>

          {/* Name */}
          <p className="text-center text-sm font-medium text-gray-700 mb-6">
            NAME: {entry.name?.toUpperCase() || "GUEST"}
          </p>

          {/* Buttons */}
          <div className="space-y-3">
            <Button 
              variant="destructive" 
              className="w-full bg-orange-600 hover:bg-orange-700"
              onClick={() => window.location.href = `/queue/${entry.id}/leave`}
            >
              LEAVE QUEUE
            </Button>
            <Button 
              variant="outline" 
              className="w-full border-orange-600 text-orange-600 hover:bg-orange-50"
              asChild
            >
              <Link href="/menu">EXPLORE OUR MENU</Link>
            </Button>
          </div>
        </CardContent>
      </Card>
    </div>
  );
}

File 2: client/src/pages/AcceptTable.tsx
tsximport { useParams } from "wouter";
import { useQueueStatus, useAcceptTable } from "@/hooks/use-queue";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Textarea } from "@/components/ui/textarea";
import { MapPin } from "lucide-react";
import { useState } from "react";
import { useToast } from "@/hooks/use-toast";

export default function AcceptTable() {
  const { id } = useParams();
  const { data: entry, isLoading } = useQueueStatus(id || "");
  const { mutate: acceptTable, isPending } = useAcceptTable();
  const [message, setMessage] = useState("");
  const { toast } = useToast();

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center">
        <div className="text-xl">Loading...</div>
      </div>
    );
  }

  if (!entry || entry.status !== 'called') {
    return (
      <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center p-4">
        <Card className="max-w-md">
          <CardContent className="pt-6">
            <p className="text-center text-gray-600">This invitation is no longer valid</p>
          </CardContent>
        </Card>
      </div>
    );
  }

  const handleAccept = () => {
    acceptTable(
      { id: id!, message: message || undefined, onlyMessage: false },
      {
        onSuccess: () => {
          toast({
            title: "Table Accepted!",
            description: "Please head to the counter",
          });
        },
      }
    );
  };

  const handleSendMessage = () => {
    acceptTable(
      { id: id!, message, onlyMessage: true },
      {
        onSuccess: () => {
          toast({
            title: "Message Sent",
            description: "The cafe has been notified",
          });
          setMessage("");
        },
      }
    );
  };

  // Show confirmed screen if already accepted
  if (entry.status === 'confirmed') {
    return (
      <div className="min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 flex items-center justify-center p-4">
        <Card className="w-full max-w-md bg-white/95 backdrop-blur-sm shadow-2xl">
          <CardContent className="pt-8 pb-6 px-6">
            {/* Large Success Icon with Animation */}
            <div className="flex justify-center mb-6">
              <div className="relative">
                <div className="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center animate-bounce">
                  <svg className="w-14 h-14 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M5 13l4 4L19 7" />
                  </svg>
                </div>
                {/* Confetti effect */}
                <div className="absolute inset-0 -z-10">
                  {[...Array(12)].map((_, i) => (
                    <div
                      key={i}
                      className="absolute w-2 h-2 bg-green-400 rounded-full animate-ping"
                      style={{
                        top: `${Math.random() * 100}%`,
                        left: `${Math.random() * 100}%`,
                        animationDelay: `${Math.random() * 2}s`,
                      }}
                    />
                  ))}
                </div>
              </div>
            </div>

            {/* Confirmation Message */}
            <h1 className="text-4xl font-bold text-center text-gray-800 mb-3">
              You're Confirmed!
            </h1>
            <p className="text-center text-gray-700 mb-8 text-lg">
              Thanks <span className="font-semibold">{entry.name}</span>. Please head to the counter and show this screen.
            </p>

            {/* Booking Number Display - PROMINENT */}
            <div className="bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-dashed border-orange-400 rounded-2xl p-6 mb-6">
              <p className="text-center text-sm font-medium text-gray-600 mb-2">
                BOOKING NUMBER
              </p>
              <div className="text-center text-7xl font-bold text-gray-800 mb-2">
                #{entry.dailySerialNumber}
              </div>
              <p className="text-center text-sm text-gray-600 font-medium">
                Show this number at the counter
              </p>
            </div>

            {/* Location */}
            <div className="flex items-center justify-center gap-2 text-gray-700 mb-6">
              <MapPin className="w-5 h-5 text-orange-600" />
              <span className="font-medium">Cafe 2020 Main Counter</span>
            </div>

            {/* Optional: Add party size info */}
            <div className="text-center text-sm text-gray-600">
              Party of {entry.numberOfPeople}
            </div>
          </CardContent>
        </Card>
      </div>
    );
  }

  // Rest of accept table logic (timer, message, buttons)...
  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center p-4">
      {/* Your existing accept table UI */}
    </div>
  );
}
```

---

## üöÄ **Replit Agent Prompt (Copy-Paste This):**
```
TASK: Fix confusing queue number display in customer pages

PROBLEM:
Users see two different numbers and get confused:
- Waiting page shows: "Queue Number #59" and "You are #3 in line"  
- Confirmed page shows: "Queue Number #59"
- Users think: "I was #3, why am I now #59?"

EXPLANATION:
- dailySerialNumber (#59) = Booking reference ID (59th booking today)
- position (#3) = Current place in waiting queue (3rd in line)
- These serve different purposes but both are labeled "queue number"

SOLUTION:
Display different information at different stages:

1. WAITING PAGE (QueueStatus.tsx):
   - PRIMARY DISPLAY: Position in line (#3) - use entry.position
   - Show big: "Your position in line: #3"
   - Show big: "YOU ARE #3 IN LINE"  
   - Show small: "Booking Reference: #59" - use entry.dailySerialNumber
   - Users care about "how long to wait" not "booking ID"

2. CONFIRMED PAGE (AcceptTable.tsx - confirmed state):
   - PRIMARY DISPLAY: Booking number (#59) - use entry.dailySerialNumber
   - Show big: "BOOKING NUMBER: #59"
   - Add text: "Show this number at the counter"
   - This is what customer shows staff when seated

FILES TO UPDATE:
1. client/src/pages/QueueStatus.tsx
   - Change main display from dailySerialNumber to position
   - Make position number large and prominent
   - Show dailySerialNumber as small "Booking Reference"

2. client/src/pages/AcceptTable.tsx  
   - In confirmed state, show dailySerialNumber as "BOOKING NUMBER"
   - Add helper text explaining to show at counter
   - Keep it large and clear

VERIFICATION:
After changes:
- Waiting user sees: "Position #3" (prominent) + "Booking Ref: #59" (small)
- Confirmed user sees: "Booking Number #59" (prominent) + instruction text
- No more confusion about number changes

‚úÖ Summary:
What changes:

Waiting screen: Show POSITION prominently (#3), booking ref small
Confirmed screen: Show BOOKING NUMBER prominently (#59)
Labels make it clear: "Position" vs "Booking Number"